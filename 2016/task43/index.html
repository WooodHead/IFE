<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>相册拼图</title>
	<link rel="stylesheet" href="css/loading.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="gallery" id="gallery1"></div>
	<div class="gallery" id="gallery2"></div>
	<div class="gallery" id="gallery3"></div>
	<div class="gallery" id="gallery4"></div>
	<div class="gallery" id="gallery5"></div>
	<div class="gallery" id="gallery6"></div>
	<div class="bounce" id="bounce">
		<span></span>
		<span></span>
	</div>
	

	<script src="../base.js"></script>
	<script src="task.js"></script>
	<script>
		(function(){
			var pics = [];//图片url
			for(var i = 1; i <= 21; i++){
				pics.push("image/" + i + '.jpg');
			}
			function loadImage(pics, callback){
				var images = [];//HTMLImageElement
				var cot = 21;//当21张图片都加载完执行回调函数
				for(var i = 0; i < pics.length; i++){
					images[i] = new Image();
					images[i].src = pics[i];
					images[i].onload = function(){
						cot--;
						if(!cot){
							callback(images);
						}
					}
				}
			}
			loadImage(pics, function(images){
				$('#bounce').className += 'hide';
				new Gallery($('#gallery1'), images.slice(0, 1));
				new Gallery($('#gallery2'), images.slice(1, 3));
				new Gallery($('#gallery3'), images.slice(3, 6));
				new Gallery($('#gallery4'), images.slice(6, 10));
				new Gallery($('#gallery5'), images.slice(10, 15));
				new Gallery($('#gallery6'), images.slice(15, 21));
			})
			
		})();
	</script>
</body>
</html>